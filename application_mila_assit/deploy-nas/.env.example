# ===================================================================
# Configuration Mila-Assist pour Synology NAS - TEMPLATE
# ===================================================================
# IMPORTANT:
# 1. Copiez ce fichier vers .env
# 2. Remplacez TOUTES les valeurs par des valeurs sécurisées
# 3. NE COMMITEZ JAMAIS le fichier .env (il est dans .gitignore)
# ===================================================================

# Configuration Base de Données MySQL
MYSQL_ROOT_PASSWORD=CHANGEZ_MOI_AVEC_MOT_DE_PASSE_FORT
MYSQL_DATABASE=mila_assist_db
MYSQL_USER=mila_user
MYSQL_PASSWORD=CHANGEZ_MOI_AVEC_MOT_DE_PASSE_FORT
MYSQL_HOST=mysql
MYSQL_PORT=3306

# Configuration API FastAPI
USE_API=true
DEBUG=false
API_HOST=0.0.0.0
API_PORT=8000
API_EXTERNAL_PORT=9000
API_WORKERS=2
API_RELOAD=false

# Sécurité et Authentification
# Générez des clés sécurisées avec: python -c "import secrets; print(secrets.token_urlsafe(32))"
DEFAULT_API_KEY=CHANGEZ_MOI_AVEC_CLE_SECURISEE
API_KEY=CHANGEZ_MOI_AVEC_CLE_SECURISEE
JWT_SECRET_KEY=CHANGEZ_MOI_AVEC_CLE_SECURISEE
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=1440
SECRET_KEY=CHANGEZ_MOI_AVEC_CLE_SECURISEE

# Configuration IA (Optimisé FRANÇAIS uniquement - CamemBERT MS MARCO FR)
MODEL_EMBEDDINGS=antoinelouis/biencoder-camembert-base-mmarcoFR
EMBEDDINGS_MODEL_PATH=/app/modeles/embeddings
MODEL_LLM_PATH=/app/modeles/gemma-2-2b-it-q4.gguf
FAISS_INDEX_PATH=/app/donnees/faiss_index/intents.index
MAX_RETRIEVE_RESULTS=3
RESPONSE_MODE=balanced

# Rate Limiting
RATE_LIMIT_PER_MINUTE=100
RATE_LIMIT_GLOBAL=1000

# Logging
LOG_LEVEL=INFO
LOG_FILE=/app/logs/mila_assist.log

# CORS (séparé par virgules)
# Adaptez cette ligne avec votre domaine NAS
CORS_ORIGINS=https://VOTRE_NAS.synology.me:10443,http://localhost:3000

# Cache
CACHE_ENABLED=true
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE=100

# Métriques
METRICS_ENABLED=true

# Environnement
ENVIRONMENT=production

# Compatibilité ancien système
DB_TYPE=mysql
USE_LEGACY_FALLBACK=false

# Paramètres de génération LLM (Optimisés pour DS423+ Celeron J4125 - 6GB RAM)
LLM_MAX_TOKENS=200
LLM_TEMPERATURE=0.3
LLM_TOP_P=0.9
LLM_TOP_K=40
LLM_REPETITION_PENALTY=1.1
LLM_N_CTX=4096
LLM_N_THREADS=4
LLM_N_BATCH=512

# Base de données (Optimisé pour 4GB RAM)
MYSQL_POOL_SIZE=3

# Synchronisation automatique FAISS
# Si true, l'index FAISS sera rebuild automatiquement au démarrage
# Si false (défaut), rebuild uniquement si MySQL a redémarré ou si l'index est obsolète
# RECOMMANDÉ: true pour la production NAS (garantit la synchronisation)
FAISS_AUTO_REBUILD=true
