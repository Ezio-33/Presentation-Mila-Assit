<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mila-Assist - Entretien Technique ML 2026</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/theme/night.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Switch Buttons -->
    <a href="Presentation_demoday.html" class="switch-btn" style="right: 15px;" title="Passer à la présentation DemoDay (EN)">
        DemoDay (EN) →
    </a>
    <a href="Presentation_demoday_FR.html" class="switch-btn" style="right: 140px;" title="Passer à la présentation DemoDay (FR)">
        DemoDay (FR) →
    </a>
    <style>
        .switch-btn {
            position: fixed;
            top: 15px;
            z-index: 9999;
            padding: 8px 14px;
            background: rgba(99, 102, 241, 0.15);
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 6px;
            color: #a5b4fc;
            font-size: 0.75em;
            text-decoration: none;
            opacity: 0.5;
            transition: all 0.3s ease;
        }
        .switch-btn:hover {
            opacity: 1;
            background: rgba(99, 102, 241, 0.3);
            color: #c7d2fe;
        }
    </style>
    <div class="reveal">
        <div class="slides">

            <!-- SLIDE 1: Titre -->
            <section class="center">
                <h1>MILA-ASSIST</h1>
                <h3 style="color: #a5b4fc;">Chatbot Support Technique AI_licia</h3>
                <div style="margin-top: 40px; font-size: 0.9em; color: #94a3b8;">
                    <em>"Un chatbot qui comprend vraiment ce que vous demandez"</em>
                </div>
                <div style="margin-top: 60px;">
                    <p><strong>Samuel VERSCHUEREN</strong></p>
                    <p class="small-text">Entretien Technique 2026</p>
                </div>
            </section>

            <!-- SLIDE 2: Projet & Contexte -->
            <section>
                <h2>Projet & Contexte</h2>

                <div class="box">
                    <strong>AI_licia</strong> : Plateforme web pour streamers<br>
                    - Créer IA personnalisée (voix, apparence, comportement)<br>
                    - Interaction automatisée avec viewers (chat, FAQ, modération)
                </div>

                <div class="box-success">
                    <strong>MILA-ASSIST</strong> : Chatbot support technique AI_licia<br>
                    Base de connaissances : <span class="highlight">Q&A</span> (configuration, utilisation, personnalisation)
                </div>

                <div class="box-warning" style="margin-top: 20px;">
                    <strong>Contraintes :</strong> Hébergement local, Précision &gt; 85%, 0€ API externe, souverainete des données
                </div>
            </section>

            <!-- SLIDE 3: Pipeline RAG - Vue d'ensemble -->
            <section>
                <h2>Pipeline RAG - Vue d'ensemble</h2>

                <div class="visual-diagram" style="font-size: 0.72em;">
<pre>
<span style="color: #22c55e; font-weight: bold;">INDEXATION (une seule fois)</span>

  Document Q&A ───→ [Tokenisation] ───→ [Embedding CamemBERT] ───→ [Stockage FAISS]
                                                                          │
                                                                          ▼
<span style="color: #818cf8; font-weight: bold;">INFERENCE (chaque requête)</span>                                          ┌─────────────┐
                                                                    │ Index FAISS │
  Question ───→ [Tokenisation] ───→ [Embedding CamemBERT] ───→ [Recherche top-5]
  utilisateur                                                          │
                                                                       ▼
                              [SLM gemma-2-2b-it-q4] ◄─── [Contexte + Question]
                                        │
                                        ▼
                               <span class="highlight">Réponse + Confiance</span>
</pre>
                </div>

                <div class="box-success">
                    <strong>Avantage RAG :</strong> Le SLM ne peut pas halluciner - il reformule uniquement le contexte fourni
                </div>
            </section>

            <!-- SLIDE 4: Indexation - Les 3 etapes -->
            <section>
                <h2>Indexation : Les 3 Étapes Critiques</h2>

                <div class="box-warning">
                    <strong>Étape 1 : Stratégie de Chunking</strong> (choix architectural)
                </div>

                <div class="comparison-table">
                    <table>
                        <tr>
                            <th>Stratégie</th>
                            <th>Description</th>
                            <th>Mon choix</th>
                        </tr>
                        <tr>
                            <td>Chunking par taille</td>
                            <td>Découper en chunks de N tokens</td>
                            <td style="color: #ef4444;">Non utilisé</td>
                        </tr>
                        <tr>
                            <td>Chunking sémantique</td>
                            <td>Découper par paragraphes/sections</td>
                            <td style="color: #ef4444;">Non utilisé</td>
                        </tr>
                        <tr style="background: rgba(34, 197, 94, 0.1);">
                            <td><strong>Document-level</strong></td>
                            <td>1 paire Q&A = 1 vecteur</td>
                            <td><span class="highlight">✅ Choisi</span></td>
                        </tr>
                    </table>
                </div>

                <div class="box">
                    Chunker couperait le contexte et dégraderait le Self-Attention du SLM.<br>
                    <code>texte = f"{question} {reponse}"</code> → 1 embedding de 768D
                </div>
            </section>

            <!-- SLIDE 5: Tokenisation - Processus -->
            <section>
                <h2>Étape 2 : Tokenisation</h2>

                <div class="visual-diagram" style="font-size: 0.75em;">
<pre>
"Comment configurer le TTS ?"
              │
              ▼
┌─────────────────────────────────────────────────────────────────────────────────────┐
│  <span style="color: #f59e0b;">[TOKENISATION SentencePiece]</span>                                                       │
│                                                                                     │
│  "Comment"  ───→  "configurer"  ───→  "le"  ───→  "TTS"  ───→  "?"                  │
│      │                 │               │            │           │                   │
│      ▼                 ▼               ▼            ▼           ▼                   │
│   [emb1]            [emb2]          [emb3]       [emb4]      [emb5]                 │
│      │                 │               │            │           │                   │
│      └────────────────────────┬────────────────────────────────┘                    │
│                               ▼                                                     │
│                      <span style="color: #22c55e;">[MEAN POOLING]</span>                                                 │
│                               │                                                     │
│                               ▼                                                     │
│                  <span class="highlight">Vecteur final 768 dimensions</span>                                       │
└─────────────────────────────────────────────────────────────────────────────────────┘
</pre>
                </div>

                <div class="box">
                    <strong>Processus :</strong> Tokenisation SentencePiece → Embedding token par token → Mean Pooling = vecteur final
                </div>
            </section>

            <!-- SLIDE 6: Embedding CamemBERT -->
            <section>
                <h2>Étape 3 : Embedding CamemBERT</h2>

                <p class="emphasis">Texte → Vecteurs numériques</p>

                <div class="code-box">
"Comment configurer le TTS ?"
   ↓ CamemBERT
[0.023, -0.152, 0.089, ..., 0.045]
        768 dimensions
                </div>

                <div class="comparison-table">
                    <table>
                        <tr>
                            <th>Technique</th>
                            <th>Contexte</th>
                            <th>Multilingue</th>
                            <th>Verdict</th>
                        </tr>
                        <tr>
                            <td>Word2Vec</td>
                            <td>❌ Statique</td>
                            <td>⚠️ Générique</td>
                            <td>Moins précis</td>
                        </tr>
                        <tr>
                            <td><strong>paraphrase-multilingual-MiniLM-L12-v2</strong></td>
                            <td><span class="highlight">✅ Contextuel</span></td>
                            <td><span class="highlight">✅ Multilingue</span></td>
                            <td>Léger mais moins précis FR</td>
                        </tr>
                        <tr style="background: rgba(34, 197, 94, 0.1);">
                            <td><strong>CamemBERT MS MARCO</strong></td>
                            <td><span class="highlight">✅ Contextuel</span></td>
                            <td><span class="highlight">✅ Spécialisé FR</span></td>
                            <td><strong>Hit Rate : 90%</strong></td>
                        </tr>
                    </table>
                </div>
            </section>

            <!-- SLIDE 7: Self-Attention -->
            <section>
                <h2>Mécanisme Clé : Self-Attention</h2>

                <div class="visual-diagram" style="font-size: 0.85em;">
<pre>
Phrase: <span style="color: #a5b4fc;">"AI_licia répond dans le <span style="color: #f59e0b; font-weight: bold;">chat</span> pendant le stream"</span>

Le mot <span style="color: #f59e0b; font-weight: bold;">"chat"</span> calcule un score d'attention pour chaque mot de la phrase :

┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│   "AI_licia"  ──→  <span style="color: #94a3b8;">0.18</span>  ░░░░░                                                  │
│   "répond"    ──→  <span style="color: #818cf8;">0.65</span>  ░░░░░░░░░░░░░░                                         │
│   "dans"      ──→  <span style="color: #94a3b8;">0.08</span>  ░░                                                     │
│   "le"        ──→  <span style="color: #94a3b8;">0.05</span>  ░                                                      │
│   "chat"      ──→  <span style="color: #94a3b8;">0.12</span>  ░░░                                                    │
│   "pendant"   ──→  <span style="color: #818cf8;">0.42</span>  ░░░░░░░░░░                                             │
│   "le"        ──→  <span style="color: #94a3b8;">0.06</span>  ░░                                                     │
│   <span class="highlight">"stream"    ──→  0.88  ░░░░░░░░░░░░░░░░░░░░░  (FORTE ATTENTION)</span>               │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘

  <span style="color: #ef4444;">✗ "chat" = animal félin ?</span>        <span style="color: #22c55e; font-weight: bold;">✓ "chat" = discussion Twitch !</span>
    (contexte : maison, miaou)         (contexte : stream, répond)
</pre>
                </div>

                <div class="box">
                    <strong>Multi-Head Attention :</strong> 12 têtes en parallèle capturent différents aspects contextuels<br>
                    <strong>Architecture :</strong> 768 dimensions / 12 têtes = 64 dimensions par tête
                </div>
            </section>

            <!-- SLIDE 8: Alternatives Évaluées -->
            <section>
                <h2>Alternatives Évaluées</h2>

                <div class="comparison-table">
                    <table>
                        <tr>
                            <th>Approche</th>
                            <th>Performance</th>
                            <th>Verdict</th>
                        </tr>
                        <tr>
                            <td>Word2Vec</td>
                            <td>Statique</td>
                            <td><span style="color: #ef4444;">❌ Contexte perdu</span></td>
                        </tr>
                        <tr>
                            <td>paraphrase-multilingual-MiniLM-L12-v2</td>
                            <td>Léger, multilingue</td>
                            <td><span style="color: #f59e0b;">⚠️ Moins précis FR</span></td>
                        </tr>
                        <tr>
                            <td>OpenAI API</td>
                            <td>Excellent</td>
                            <td><span style="color: #ef4444;">❌ Coût + RGPD</span></td>
                        </tr>
                        <tr style="background: rgba(34, 197, 94, 0.1);">
                            <td><strong>CamemBERT MS MARCO</strong></td>
                            <td><span class="highlight">90% Hit Rate</span></td>
                            <td><span class="highlight">✅ Choisi</span></td>
                        </tr>
                    </table>
                </div>

                <div class="box-success">
                    <strong>Décision :</strong> Meilleure précision pour le français, 0€ API, souverainete des données
                </div>
            </section>

            <!-- SLIDE 9: FAISS -->
            <section>
                <h2>Recherche Vectorielle - FAISS</h2>

                <p class="emphasis">Alternatives à IndexFlatIP évaluées</p>

                <div class="comparison-table">
                    <table>
                        <tr>
                            <th>Index FAISS</th>
                            <th>Précision</th>
                            <th>Vitesse</th>
                            <th>RAM</th>
                            <th>Quand l'utiliser ?</th>
                        </tr>
                        <tr style="background: rgba(34, 197, 94, 0.1);">
                            <td><strong>IndexFlatIP</strong> ✅</td>
                            <td><span class="highlight">100%</span></td>
                            <td>O(n)</td>
                            <td>Faible</td>
                            <td><strong>&lt; 10K vecteurs (mon cas)</strong></td>
                        </tr>
                        <tr>
                            <td>IndexIVFFlat</td>
                            <td>95-99%</td>
                            <td>O(√n)</td>
                            <td>Moyenne</td>
                            <td>10K - 1M vecteurs</td>
                        </tr>
                        <tr>
                            <td>IndexHNSW</td>
                            <td>98-100%</td>
                            <td>O(log n)</td>
                            <td>Haute</td>
                            <td>&gt; 1M vecteurs</td>
                        </tr>
                        <tr>
                            <td>IndexLSH</td>
                            <td>85-95%</td>
                            <td>O(log n)</td>
                            <td>Faible</td>
                            <td>&gt; 10M vecteurs</td>
                        </tr>
                    </table>
                </div>

                <div class="box-success">
                    <strong>Décision :</strong> Avec 1366 vecteurs, IndexFlatIP offre précision 100% et ~1.2s de latence. Pas besoin d'approximation (ANN).
                </div>
            </section>

            <!-- SLIDE 10: Similarité Cosinus -->
            <section>
                <h2>Similarité Cosinus & Optimisation</h2>

                <div class="box">
                    <strong>Normalisation L2</strong> : Vecteurs de norme = 1.0<br>
                    → Produit scalaire = Similarité cosinus (plus rapide)
                </div>

                <div class="code-box">
# Client
embedding = model.encode(
    text,
    normalize_embeddings=True  <span class="highlight">⭐</span>
)

# Serveur
faiss.normalize_L2(query_vector)  <span class="highlight">⭐</span>
                </div>

                <div class="box-success">
                    <strong>Résultat :</strong> IndexFlatIP exploite cette optimisation<br>
                    Recherche en ~1.2s parmi 1366 vecteurs
                </div>
            </section>

            <!-- SLIDE 11: SLM Gemma-2B -->
            <section>
                <h2>SLM : gemma-2-2b-it-q4</h2>

                <div class="box-warning">
                    <strong>SLM</strong> (Small Language Model),2 milliards de paramètres <br>
                    vs <br>
                    LLM (Large Language Model) 70B+ paramètres.
                </div>

                <div class="metric-grid">
                    <div class="metric-card">
                        <div class="metric-value" style="font-size: 1.4em;">Gemma-2</div>
                        <div class="metric-label">Modèle Google</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" style="font-size: 1.4em;">2B</div>
                        <div class="metric-label">Paramètres</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" style="font-size: 1.4em;">IT-Q4</div>
                        <div class="metric-label">Instruction Tuned + Quantifié</div>
                    </div>
                </div>

                <div class="box">
                    <strong>Pourquoi gemma-2-2b-it-q4 ?</strong>
                    <ul style="margin: 10px 0 0 20px;">
                        <li>Open-source Google (Apache 2.0)</li>
                        <li>Optimisé pour l'instruction-following</li>
                        <li>Suffisant pour RAG (reformule le contexte fourni)</li>
                    </ul>
                </div>
            </section>

            <!-- SLIDE 12: Quantization Q4 et GGUF -->
            <section>
                <h2>Quantization Q4 & Format GGUF</h2>

                <div class="two-columns">
                    <div>
                        <h3 style="color: #22c55e;">Quantization Q4</h3>
                        <div class="box" style="font-size: 0.85em; padding: 12px;">
                            <strong>Principe :</strong> 4 bits/paramètre au lieu de 32<br>
                            <strong>Calcul :</strong> 32 / 4 = 8× moins de mémoire<br>
                            <strong>Réduction :</strong> ~85% RAM
                        </div>
                        <div class="box-success" style="font-size: 0.85em; padding: 12px;">
                            <strong>Viable pour RAG :</strong><br>
                            Le SLM reformule le contexte fourni.<br>
                            Dégradation : 0-2% (négligeable)
                        </div>
                    </div>
                    <div>
                        <h3 style="color: #f59e0b;">Format GGUF</h3>
                        <div class="box" style="font-size: 0.85em; padding: 12px;">
                            <strong>GGUF vs VLLM :</strong><br>
                            - GGUF = llama.cpp (CPU optimisé)<br>
                            - VLLM = GPU requis<br><br>
                            <strong>Mon NAS actuel :</strong><br>
                            12 Go RAM + RTX 3060<br>
                            <span style="font-size: 0.85em; color: #94a3b8;">(Début projet : 6 Go sans GPU)</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SLIDE 13: Prompt Systeme - Partie 1 -->
            <section>
                <h2>Prompt Système (1/2) <span style="font-size: 0.5em; color: #94a3b8;">generateur_llm.py:98-153</span></h2>

                <div class="code-box" style="padding: 15px; line-height: 1.35; background: #1e1e2e; font-size: 0.9em;">
<pre style="margin: 0; color: #cdd6f4;">prompt = f"""&lt;s&gt;[INST] Tu es Mila, une assistante virtuelle francophone sur le produit AI_Licia.

<span style="color: #f9e2af;">=== REGLE ABSOLUE ===</span>
LANGUE OBLIGATOIRE: FRANCAIS SEULEMENT
- Tu dois repondre EXCLUSIVEMENT en francais
- AUCUN mot anglais n'est autorise dans ta reponse
- Si le contexte contient de l'anglais, tu le traduis en francais
- Si la question est en anglais, ta reponse doit etre en francais
- Si on te demande de répondre en anglais, explique gentiment que tu es configurée pour répondre uniquement en français
- Tu es une assistante FRANCAISE qui parle FRANCAIS
- Tu dois rester polie et courtoise en toute situation

<span style="color: #f9e2af;">=== REGLE CRITIQUE SUR LES LIENS - INTERDICTION STRICTE ===</span>
ATTENTION: Cette regle est ABSOLUE et NON NEGOCIABLE.

SI le contexte contient des URLs:
- COPIE EXACTEMENT l'URL complete du contexte (caractere par caractere)
- Format: [texte descriptif](URL EXACTE DU CONTEXTE)
- Exemple: si contexte dit "https://dashboard.getailicia.com/signup"
  Tu ecris: [inscription](https://dashboard.getailicia.com/signup)</pre>
                </div>
            </section>

            <!-- SLIDE 13b: Prompt Systeme - Partie 2 -->
            <section>
                <h2>Prompt Système (2/2) <span style="font-size: 0.5em; color: #94a3b8;">generateur_llm.py:98-153</span></h2>

                <div class="code-box" style="padding: 15px; line-height: 1.35; background: #1e1e2e; font-size: 0.9em;">
<pre style="margin: 0; color: #cdd6f4;">SI le contexte ne contient PAS d'URL:
- N'inclus AUCUN lien dans ta reponse
- Ne mentionne PAS de site web
- Reste factuel sans suggerer de liens
INTERDICTIONS ABSOLUES:
- N'invente JAMAIS d'URL (comme https://www.ailicia.io/)
- Ne devine JAMAIS une URL
- Ne raccourcis JAMAIS une URL
- N'ecris AUCUNE URL qui n'est pas dans le contexte
- Si tu n'es pas sur a 100% qu'une URL est dans le contexte, NE L'UTILISE PAS
<span style="color: #f9e2af;">=== INSTRUCTIONS ===</span>
- Reponds toujours en francais a partir du contexte fourni
- Utilise toutes les informations pertinentes du contexte
- Donne une reponse complete, claire et utile
- Reste naturelle et professionnelle
- Si la question n'est pas dans ta base de connaissances, dis-le poliment et essaye de repondre avec ce que tu sais.
<span style="color: #f9e2af;">=== CONTEXTE ===</span>
<span style="color: #fab387;">{contexte}</span>
<span style="color: #f9e2af;">=== QUESTION DE L'UTILISATEUR ===</span>
<span style="color: #fab387;">{question}</span>
<span style="color: #f9e2af;">=== TA REPONSE (EN FRANCAIS, LIENS UNIQUEMENT SI DANS LE CONTEXTE) ===</span>
[/INST]"""</pre>
                </div>

                <div class="box" style="padding: 10px 16px; font-size: 0.72em; margin-top: 10px;">
                    <strong>Paramètres :</strong><br>
                    • <strong>N_CTX = 4096</strong> : taille du contexte (tokens visibles)<br>
                    • <strong>MAX_TOKENS = 512</strong> : limite de tokens générés<br>
                    • <strong>TEMPERATURE = 0.3</strong> : créativité basse, réponses focalisées<br>
                    • <strong>REPETITION_PENALTY = 1.3</strong> : pénalité pour éviter les répétitions
                </div>
            </section>

            <!-- SLIDE 14: Fenetre de Contexte -->
            <section>
                <h2>Fenêtre de Contexte</h2>

                <div class="metric-grid" style="gap: 12px;">
                    <div class="metric-card" style="padding: 12px;">
                        <div class="metric-value" style="font-size: 1.4em;">4096</div>
                        <div class="metric-label" style="font-size: 0.75em;">Tokens max</div>
                    </div>
                    <div class="metric-card" style="padding: 12px;">
                        <div class="metric-value" style="font-size: 1.4em;">5</div>
                        <div class="metric-label" style="font-size: 0.75em;">Documents top-K</div>
                    </div>
                    <div class="metric-card" style="padding: 12px;">
                        <div class="metric-value" style="font-size: 1.4em;">Stateless</div>
                        <div class="metric-label" style="font-size: 0.75em;">Architecture</div>
                    </div>
                </div>

                <div class="box" style="font-size: 0.75em; padding: 10px 12px;">
                    <strong>Architecture stateless</strong> (single-turn) - Pas d'historique de conversation<br><br>
                    Chaque requête contient :<br>
                    - Prompt système (~200 tokens) - Top-5 documents FAISS (~800-1500 tokens)<br>
                    - Question utilisateur (~50 tokens) - Réponse générée (max 512 tokens)<br>
                    <strong>Total :</strong> ~2000-2500 tokens utilisés sur 4096 disponibles
                </div>
            </section>

            <!-- SLIDE 15: Architecture Pipeline Complet -->
            <section class="architecture-slide">
                <h2>Architecture & Pipeline Complet</h2>

                <div class="arch-container">
                    <div class="arch-row">
                        <div class="arch-clients">
                            <div class="arch-section-title" style="color: #22c55e;">CLIENTS</div>
                            <div class="arch-box client">
                                <div class="arch-box-title" style="color: #22c55e;">PyQt5</div>
                                <div class="arch-box-content">Q + <span class="highlight">CamemBERT</span><br>Embed 768D</div>
                            </div>
                            <div class="arch-box client">
                                <div class="arch-box-title" style="color: #f59e0b;">Web</div>
                                <div class="arch-box-content">Q seule<br><span style="color: #ef4444;">❌</span> Sans embed</div>
                            </div>
                        </div>

                        <div style="min-width: 60px; text-align: center; color: #94a3b8; font-size: 0.85em;"><br><br><br> =></div>

                        <div class="arch-servers">
                            <div class="arch-section-title" style="color: #818cf8;">SERVEUR NAS - 4 Containers Docker</div>

                            <div class="arch-box server">
                                <div class="arch-box-title" style="color: #f59e0b;">Container 2: API Backend (:9000 public)</div>
                                <div class="arch-box-content">• Validation question<br>• Gestion sessions</div>
                            </div>

                            <div class="arch-arrow">↓ HTTP POST /search</div>

                            <div class="arch-box server highlight">
                                <div class="arch-box-title" style="color: #22c55e;">Container 3: LLM + FAISS (:8001 interne)</div>
                                <div class="arch-box-content">
                                    1️⃣ Embedding (si absent): Q → CamemBERT → [768D]<br>
                                    2️⃣ FAISS Search (~1.2s): [768D] → <span class="highlight">index pré-calculé (1366 vecteurs)</span><br>
                                    &nbsp;&nbsp;&nbsp;&nbsp;→ top-5 IDs: [42, 15, 89, 50, 87]
                                </div>
                            </div>

                            <div class="arch-arrow">↓ SELECT WHERE id IN (...)</div>

                            <div class="arch-box server">
                                <div class="arch-box-title" style="color: #6366f1;">Container 1: MySQL 8.0</div>
                                <div class="arch-box-content">•Q&A (base_connaissances)<br>• Retourne texte complet des top-5</div>
                            </div>

                            <div class="arch-arrow">↓ JSON: contexte (3 Q&A texte)</div>

                            <div class="arch-box server highlight">
                                <div class="arch-box-title" style="color: #22c55e;">Container 3: LLM + FAISS</div>
                                <div class="arch-box-content">
                                    3️⃣ Génération LLM: Q + contexte → réponse<br>
                                    4️⃣ Calcul confiance (similarité cosinus)
                                </div>
                            </div>

                            <div class="arch-arrow">↓ JSON: {reponse, confiance, IDs}</div>

                            <div class="arch-box server">
                                <div class="arch-box-title" style="color: #f59e0b;">Container 2: API Backend</div>
                                <div class="arch-box-content">• Enregistre conversation → MySQL<br>• Récupère détails sources</div>
                            </div>

                            <div class="arch-arrow">↓ JSON: réponse complète</div>

                            <div class="arch-box server">
                                <div class="arch-box-content" style="text-align: center; font-weight: bold;">CLIENT: Affiche réponse + sources + confiance</div>
                            </div>
                        </div>
                    </div>

                    <div class="arch-footer">
                        Container 4: phpMyAdmin (dev) | Auto-sync FAISS: rebuild si MySQL modifié
                    </div>
                </div>
            </section>

            <!-- SLIDE 16: Metriques - Preuves -->
            <section>
                <h2>Validation : Métriques Retrieval</h2>

                <div class="metric-grid">
                    <div class="metric-card">
                        <div class="metric-value">90%</div>
                        <div class="metric-label">Hit Rate @5</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">85%</div>
                        <div class="metric-label">MRR</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">77.7%</div>
                        <div class="metric-label">Confiance Moy.</div>
                    </div>
                </div>

                <div class="box-success" style="font-size: 0.85em; padding: 10px 12px;">
                    <strong>Endpoint :</strong> <a href="http://185.246.86.162:9000/api/v1/admin/evaluation?sample=20" target="_blank" class="demo-link">http://185.246.86.162:9000/api/v1/admin/evaluation?sample=20</a>
                </div>

                <div class="code-box" style="font-size: 0.72em; padding: 12px; line-height: 1.35; background: #1e1e2e;">
<pre style="margin: 0; color: #cdd6f4;"><span style="color: #6c7086;"># routes_admin.py lignes 273-287</span>
<span style="color: #89b4fa;">predictions_k</span> = predictions[:<span style="color: #fab387;">k</span>]  <span style="color: #6c7086;"># Top-5 IDs retournés par FAISS</span>
<span style="color: #89b4fa;">pertinents</span> = <span style="color: #cba6f7;">len</span>(<span style="color: #cba6f7;">set</span>(predictions_k) & <span style="color: #cba6f7;">set</span>(ground_truth))

<span style="color: #6c7086;"># Hit Rate : au moins 1 pertinent dans top-5 ?</span>
<span style="color: #89b4fa;">hit_rate</span> = <span style="color: #fab387;">1.0</span> <span style="color: #cba6f7;">if</span> pertinents > <span style="color: #fab387;">0</span> <span style="color: #cba6f7;">else</span> <span style="color: #fab387;">0.0</span>

<span style="color: #6c7086;"># MRR : position du 1er résultat pertinent</span>
<span style="color: #cba6f7;">for</span> rank, pred_id <span style="color: #cba6f7;">in</span> <span style="color: #cba6f7;">enumerate</span>(predictions_k, start=<span style="color: #fab387;">1</span>):
    <span style="color: #cba6f7;">if</span> pred_id <span style="color: #cba6f7;">in</span> ground_truth:
        <span style="color: #89b4fa;">mrr</span> = <span style="color: #fab387;">1.0</span> / rank  <span style="color: #6c7086;"># Pos 1 = 1.0, Pos 2 = 0.5</span>
        <span style="color: #cba6f7;">break</span></pre>
                </div>
            </section>

            <!-- SLIDE 17: Hit Rate vs Precision@K -->
            <section>
                <h2>Pourquoi Hit Rate et pas Precision@K ?</h2>

                <div class="two-columns">
                    <div>
                        <h3 style="color: #ef4444;">Precision@5 = 40%</h3>
                        <div class="box" style="font-size: 0.85em;">
                            Formule : pertinents / K<br>
                            Si 2 pertinents sur 5 : 2/5 = 40%<br><br>
                            <strong>Problème :</strong> Biaisée quand K petit<br>
                            Même si parfait, max = 1/5 = 20%
                        </div>
                    </div>
                    <div>
                        <h3 style="color: #22c55e;">Hit Rate = 90%</h3>
                        <div class="box-success" style="font-size: 0.85em;">
                            Formule : Au moins 1 pertinent ?<br>
                            Binaire : Succès (1) ou Échec (0)<br><br>
                            <strong>Adapté :</strong> L'utilisateur veut<br>
                            TROUVER une bonne réponse
                        </div>
                    </div>
                </div>

                <div class="box" style="margin-top: 15px;">
                    <strong>MRR = 85%</strong> complète : La bonne réponse est en position moyenne 1.18 (presque toujours 1ère)
                </div>
            </section>

            <!-- SLIDE 18: Demonstration Live -->
            <section class="center">
                <h2>Démonstration Live</h2>

                <div class="box" style="font-size: 0.9em; text-align: left; max-width: 800px; margin: 30px auto;">
                    <strong>Support AI_licia</strong> : Le système gère UNIQUEMENT le support technique pour AI_licia<br><br>

                    <strong>Tests possibles :</strong><br>
                    1️⃣ "Comment installer AI_licia ?"<br>
                    2️⃣ "Mon PC rame quand je stream" (compréhension sémantique)<br>
                    3️⃣ Question hors-sujet → Disclaimer confiance faible
                </div>

                <div class="box-success" style="margin-top: 40px; font-size: 1.2em;">
                    <strong>URL DÉMO</strong><br>
                    <a href="http://185.246.86.162:8080" target="_blank" class="demo-link" style="font-size: 0.9em;">http://185.246.86.162:8080</a><br>
                    <span style="font-size: 0.7em; color: #94a3b8;">(Interface web test - Container 3 calcule embedding)</span>
                </div>
            </section>

            <!-- SLIDE 19: Succès & Apprentissages -->
            <section>
                <h2>Succès & Apprentissages</h2>

                <div class="two-columns">
                    <div>
                        <h3 style="color: #22c55e;">✅ Succès</h3>
                        <ul class="bullet-list">
                            <li class="success">Hit Rate 90% (&gt;85% objectif)</li>
                            <li class="success">Quantization Q4 viable</li>
                            <li class="success">Architecture hybride scalable</li>
                            <li class="success">Docker stable en production</li>
                        </ul>
                    </div>
                    <div>
                        <h3 style="color: #f59e0b;">⚠️ Défis Résolus</h3>
                        <ul class="bullet-list">
                            <li class="challenge">Embedding calculé côté client OU serveur</li>
                            <li class="challenge">Docker optimisé (itérations)</li>
                            <li class="challenge">Prompt engineering LLM</li>
                        </ul>
                    </div>
                </div>

                <h3 style="margin-top: 30px;">Apprentissages Clés</h3>
                <div class="box">
                    <ul style="margin: 0; padding-left: 20px; font-size: 0.9em;">
                        <li>Self-Attention capture le contexte (vs embeddings statiques)</li>
                        <li>Normalisation L2 = optimisation simple mais efficace</li>
                        <li>F1-Score capture l'équilibre qualité/couverture</li>
                        <li>Q4 viable pour RAG (contexte compense la perte)</li>
                    </ul>
                </div>
            </section>

            <!-- SLIDE 20: Conclusion -->
            <section class="center">
                <h2>Conclusion</h2>

                <div class="metric-grid" style="max-width: 600px; margin: 15px auto; gap: 10px;">
                    <div class="metric-card" style="padding: 12px;">
                        <div class="metric-value" style="font-size: 1.8em;">90%</div>
                        <div class="metric-label" style="font-size: 0.75em;">Hit Rate</div>
                    </div>
                    <div class="metric-card" style="padding: 12px;">
                        <div class="metric-value" style="font-size: 1.8em;">~1.2s</div>
                        <div class="metric-label" style="font-size: 0.75em;">FAISS</div>
                    </div>
                    <div class="metric-card" style="padding: 12px;">
                        <div class="metric-value" style="font-size: 1.8em;">85%</div>
                        <div class="metric-label" style="font-size: 0.75em;">MRR</div>
                    </div>
                </div>

                <div class="box" style="max-width: 750px; margin: 15px auto; text-align: left; font-size: 0.8em; padding: 12px 18px;">
                    <strong>Fondamentaux ML Démontrés :</strong>
                    <ul style="margin: 8px 0 0 20px; line-height: 1.3;">
                        <li>Embeddings contextuels : CamemBERT</li>
                        <li>Self-Attention : 12 têtes multi-head</li>
                        <li>Recherche vectorielle : FAISS exhaustif</li>
                        <li>Optimisation : Normalisation L2</li>
                        <li>Quantization : Q4 (85% réduction)</li>
                        <li>Métriques : Hit Rate 90%, MRR 85%</li>
                    </ul>
                </div>

                <p style="margin-top: 15px; font-size: 0.95em; color: #a5b4fc;">
                    <em>"Client PyQt5 + 4 containers Docker.<br>
                    Pipeline ML optimisé : RAG + Quantization."</em>
                </p>
            </section>

            <!-- SLIDE 21: Questions -->
            <section class="center">
                <h1 style="font-size: 3em;">Questions ?</h1>

                <div class="metric-grid" style="max-width: 600px; margin: 60px auto; font-size: 0.9em;">
                    <div class="metric-card">
                        <div class="metric-value" style="font-size: 1.5em;">90%</div>
                        <div class="metric-label">Hit Rate</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" style="font-size: 1.5em;">85%</div>
                        <div class="metric-label">MRR</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value" style="font-size: 1.5em;">~1.2s</div>
                        <div class="metric-label">FAISS</div>
                    </div>
                </div>

                <p class="small-text" style="margin-top: 50px;">
                    Architecture : MySQL + API + LLM+FAISS (4 containers)
                </p>
            </section>

        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/reveal.js/4.6.1/reveal.min.js"></script>
    <script>
        Reveal.initialize({
            hash: true,
            slideNumber: 'c/t',
            showSlideNumber: 'all',
            transition: 'slide',
            transitionSpeed: 'default',
            backgroundTransition: 'fade',
            center: false,
            progress: true,
            controls: true,
            keyboard: true,
            overview: true,
            touch: true,
            width: 1280,
            height: 720,
            margin: 0.04,
            minScale: 0.2,
            maxScale: 2.0
        });
    </script>
</body>
</html>
